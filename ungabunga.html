<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>#game{display:block;background:#505050;width:100vw;height:100vh}</style>
    <title>Froop Jump</title>
</head>
<body bgcolor="black">
<h1 style="color: white;">Timer</h1>
  <p style="color: antiquewhite;" id="timerDisplay">00:00:00</p>
<canvas id="game"></canvas>
<script>
// no touchy!
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
let DPR=Math.max(1,window.devicePixelRatio||1);

function resize() {
  canvas.width=innerWidth*DPR;
  canvas.height=innerHeight*DPR;
  canvas.style.width=innerWidth+'px';
  canvas.style.height=innerHeight+'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);}
addEventListener('resize',resize);
resize();

let ded=0
dedart=new Image();
dedart.src='art/sob.png'
//player
const playerart=new Image();
playerart.src='art/froop_fly.png';
const froop={x:600,y:400,w:144,h:152};

//keys setup
const keys={};
addEventListener('keydown',e=>{keys[e.code]=true;
  if(e.code==='Space') e.preventDefault();});
addEventListener('keyup',e=>{keys[e.code]=false;});

let logx = Math.random() * 1000;
let logy = -200;
let logVelY = 0;
const logGravity = 0.7;

const platform = {x: logx, y: logy, w: 275.2, h: 114.4};
const platformart = new Image();
platformart.src = 'art/Log.png';

function isTouching(a, b) {

return (
a.x < b.x + b.w &&
a.x + a.w > b.x &&
a.y < b.y + b.h &&
a.y + a.h > b.y

);

}

function gameLoop() {

  logVelY += logGravity;
  logy += logVelY


  

  if (logy > canvas.height) {

logy = -platform.h;
 logVelY = 0;
 logx = Math.random() * (canvas.width -platform.w);


  }
  platform.x = logx;
  platform.y = logy;


  if (isTouching(froop, platform)) {

  window.location.href="DeathScreen.html";
return;}
  requestAnimationFrame(gameLoop);
}
gameLoop();


function move(){if(keys['KeyW']){froop.y=froop.y-12}
if(keys['KeyA']){froop.x=froop.x-12}
if(keys['KeyD']){froop.x=froop.x+12}
if(froop.x<0){froop.x=0}if(froop.x>1200){froop.x=1200}
requestAnimationFrame(move)}move()



function gravity(){froop.y=froop.y+6.25;if(froop.y>625){froop.y=625}
   
    if (froop.y >= 625) {

froop.y=625;

window.location.href = "DeathScreen.html"
return;
    }


if(froop.y<0){froop.y=0}

    requestAnimationFrame(gravity)}gravity();

const startTime = new Date();
const timerDisplay = document.getElementById('timerDisplay')

function updateTimer() {

  const currentTime = new Date();


  const timeElapsed = currentTime - startTime;



  const seconds = Math.floor(timeElapsed / 1000) % 60;
  const minutes = Math.floor(timeElapsed / 1000 * 60) % 60;
  
const formattedSeconds = seconds.toString().padStart(2, '0');
const formattedMinutes = minutes.toString().padStart(2, '0');



  timerDisplay.textContent = `${formattedMinutes}:${formattedSeconds}`;
}

setInterval(updateTimer, 1000);






function images(){ctx.clearRect(0,0,canvas.width,canvas.height);
  if(platformart.complete){ctx.drawImage(platformart,platform.x,platform.y,platform.w,platform.h)}
  if(playerart.complete){ctx.drawImage(playerart,froop.x,froop.y,froop.w,froop.h);}
  if(dedart.complete&&ded==1){ctx.drawImage(dedart,0,0,919,919)}
  requestAnimationFrame(images);}images();
</script>
</body>
<br><br><br>
<audio controls loop src="audio/ost1.wav"></audio>
</html>
